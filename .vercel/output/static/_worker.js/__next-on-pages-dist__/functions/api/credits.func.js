import{__getNamedExports as Y}from"../../../__next-on-pages-dist__/webpack/fc2d35c78fefc1db3444008f19228387.js";import{__getNamedExports as z}from"../../../__next-on-pages-dist__/webpack/43f76069387da34d9759fd763b0079e5.js";import{__getNamedExports as W}from"../../../__next-on-pages-dist__/webpack/cfe30fc2aa3258c87f4442eb84480cb6.js";import{__getNamedExports as J}from"../../../__next-on-pages-dist__/webpack/2016.js";import{__getNamedExports as V}from"../../../__next-on-pages-dist__/manifest/27d10e462fba646daaa29468a0656e12.js";var l=globalThis.__nextOnPagesRoutesIsolation.getProxyFor("/api/credits"),e=Y(l,l,l),__=e.__chunk_7226,n_=e.__chunk_4896,e_=e.__chunk_9945,t_=e.__chunk_7135,c_=e.__chunk_8598,o_=e.__chunk_4450,u_=e.__chunk_6937,r_=e.__chunk_7776,s_=e.__chunk_4116,a_=e.__chunk_2368,h_=e.__chunk_3221,k_=e.__chunk_3689,i_=e.__chunk_1494,d_=e.__chunk_6563,p_=e.__chunk_212,g_=e.__chunk_4794,f_=e.__chunk_387,l_=e.__chunk_7114,m_=e.__chunk_8881,x_=e.__chunk_8732,y_=e.__chunk_5863,E_=e.__chunk_8989,b_=e.__chunk_8672,v_=e.__chunk_9438,w_=e.__chunk_2600,P_=e.__chunk_7271,N_=e.__chunk_6526,R_=e.__chunk_4244,O_=e.__chunk_4182,C_=e.__chunk_1900,S_=e.__chunk_3297,A_=e.__chunk_4967,I_=e.__chunk_7061,M_=e.__chunk_2411,T_=e.__chunk_4395,j_=e.__chunk_5449,B_=e.__chunk_9517,F_=e.__chunk_4497,$_=e.__chunk_893,L_=e.__chunk_1168,K_=e.__chunk_2378,U_=e.__chunk_6186,G_=e.__chunk_1118,H_=e.__chunk_8555,q_=e.__chunk_8102,D_=e.__chunk_5131,Z_=e.__chunk_4223,h=z(l,l,l),Q_=h.__chunk_6774,X_=h.__chunk_7809,Y_=h.__chunk_7584,z_=h.__chunk_8216,W_=h.__chunk_4275,J_=h.__chunk_6438,V_=h.__chunk_6558,_n=h.__chunk_5936,nn=h.__chunk_4851,en=h.__chunk_1725,tn=h.__chunk_2035,cn=h.__chunk_7785,on=h.__chunk_2144,un=h.__chunk_7988,rn=h.__chunk_7212,sn=h.__chunk_9504,an=h.__chunk_7484,hn=h.__chunk_3444,kn=h.__chunk_2834,dn=h.__chunk_8050,pn=h.__chunk_5466,gn=h.__chunk_5503,fn=h.__chunk_6195,ln=h.__chunk_2067,s=W(l,l,l),mn=s.__chunk_8278,xn=s.__chunk_2745,yn=s.__chunk_1797,En=s.__chunk_2036,bn=s.__chunk_966,vn=s.__chunk_7502,wn=s.__chunk_9386,Pn=s.__chunk_4606,Nn=s.__chunk_7899,Rn=s.__chunk_2200,On=s.__chunk_3578,Cn=s.__chunk_7756,Sn=s.__chunk_9135,An=s.__chunk_1622,In=s.__chunk_8055,Mn=s.__chunk_7795,Tn=s.__chunk_1430,jn=s.__chunk_6329,Bn=s.__chunk_1316,Fn=s.__chunk_9532,$n=s.__chunk_6840,Ln=s.__chunk_4464,Kn=s.__chunk_9726,Un=s.__chunk_261,Gn=s.__chunk_6225,Hn=s.__chunk_678,qn=J(l,l,l),Dn=qn.__chunk_2016,$=V(l,l,l),Zn=$.__NEXT_FONT_MANIFEST,Qn=$.__REACT_LOADABLE_MANIFEST,Xn=$.__BUILD_MANIFEST,ne=((O,I,Yn)=>(I._ENTRIES={},O.__BUILD_MANIFEST=Xn,O.__REACT_LOADABLE_MANIFEST=Qn,O.__NEXT_FONT_MANIFEST=Zn,O.__PRERENDER_MANIFEST='{"version":4,"routes":{},"dynamicRoutes":{},"notFoundRoutes":[],"preview":{"previewModeId":"610a7ecd2df716b353bc1accb95b0f8e","previewModeSigningKey":"43725094f081d52f19f608cd637d5b8e55e6bc41e42f6643f835b4d7d715172b","previewModeEncryptionKey":"105f06a2791ae126aa6cef066dd091b866be14007071d046f8fd076b4373f3b2"}}',(()=>{"use strict";var v={},N={};function n(t){var r=N[t];if(r!==void 0)return r.exports;var c=N[t]={exports:{}},d=!0;try{v[t](c,c.exports,n),d=!1}finally{d&&delete N[t]}return c.exports}n.m=v,(()=>{var t=[];n.O=(r,c,d,p)=>{if(c){p=p||0;for(var k=t.length;k>0&&t[k-1][2]>p;k--)t[k]=t[k-1];t[k]=[c,d,p];return}for(var i=1/0,k=0;k<t.length;k++){for(var[c,d,p]=t[k],a=!0,x=0;x<c.length;x++)(p&!1||i>=p)&&Object.keys(n.O).every(y=>n.O[y](c[x]))?c.splice(x--,1):(a=!1,p<i&&(i=p));if(a){t.splice(k--,1);var g=d();g!==void 0&&(r=g)}}return r}})(),n.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return n.d(r,{a:r}),r},(()=>{var t=Object.getPrototypeOf?c=>Object.getPrototypeOf(c):c=>c.__proto__,r;n.t=function(c,d){if(d&1&&(c=this(c)),d&8||typeof c=="object"&&c&&(d&4&&c.__esModule||d&16&&typeof c.then=="function"))return c;var p=Object.create(null);n.r(p);var k={};r=r||[null,t({}),t([]),t(t)];for(var i=d&2&&c;typeof i=="object"&&!~r.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(a=>k[a]=()=>c[a]);return k.default=()=>c,n.d(p,k),p}})(),n.d=(t,r)=>{for(var c in r)n.o(r,c)&&!n.o(t,c)&&Object.defineProperty(t,c,{enumerable:!0,get:r[c]})},n.e=()=>Promise.resolve(),n.g=function(){if(typeof I=="object")return I;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),n.o=(t,r)=>Object.prototype.hasOwnProperty.call(t,r),n.r=t=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={993:0};n.O.j=d=>t[d]===0;var r=(d,p)=>{var[k,i,a]=p,x,g,_=0;if(k.some(o=>t[o]!==0)){for(x in i)n.o(i,x)&&(n.m[x]=i[x]);if(a)var f=a(n)}for(d&&d(p);_<k.length;_++)g=k[_],n.o(t,g)&&t[g]&&t[g][0](),t[g]=0;return n.O(f)},c=O.webpackChunk_N_E=O.webpackChunk_N_E||[];c.forEach(r.bind(null,0)),c.push=r.bind(null,c.push.bind(c))})()})(),(O.webpackChunk_N_E=O.webpackChunk_N_E||[]).push([[679],{2067:ln,6195:fn,116:(v,N,n)=>{"use strict";n.r(N),n.d(N,{ComponentMod:()=>Q,default:()=>X});var t={};n.r(t),n.d(t,{GET:()=>T,POST:()=>U,runtime:()=>P});var r={};n.r(r),n.d(r,{headerHooks:()=>H,originalPathname:()=>D,patchFetch:()=>Z,requestAsyncStorage:()=>G,routeModule:()=>B,serverHooks:()=>K,staticGenerationAsyncStorage:()=>L,staticGenerationBailout:()=>q});var c=n(8055),d=n(1430),p=n(5936),k=n(6558),i=n(2016),a=n(4223),x=n(7135),g=n(9945),_=n(4896),f=n(2378),o=n(1168),u=n(9517),y=n(2368),m=n(7776),w=n(4450);class R extends u.mY.classBuilder().ep({...y.q,Bucket:{type:"contextParams",name:"Bucket"},Key:{type:"contextParams",name:"Key"}}).m(function(M,C,b,S){return[(0,o.p2)(b,this.serialize,this.deserialize),(0,f.a3)(b,M.getEndpointParameterInstructions()),(0,x.Yv)(b,{input:this.input,requestChecksumRequired:!1,requestValidationModeMember:"ChecksumMode",responseAlgorithms:["CRC32","CRC32C","SHA256","SHA1"]}),(0,_.gc)(b),(0,g.HW)(b)]}).s("AmazonS3","GetObject",{}).n("S3Client","GetObjectCommand").f(m.YM,m.jd).ser(w.Ylp).de(w.mug).build(){}var E=n(3221);let P="edge";async function T(j){let M;try{let{searchParams:C}=new URL(j.url);M=C.get("userIp");let b=`credits_${M}`;try{let S=new R({Bucket:a.dQ,Key:b}),A=await a.ul.send(S),F=parseInt(await A.Body.transformToString());return i.Z.json({credits:F})}catch(S){if(S.name==="NoSuchKey"){let A=new E.U({Bucket:a.dQ,Key:b,Body:"5"});return await a.ul.send(A),i.Z.json({credits:5})}throw S}}catch(C){return console.error("Error fetching credits:",C),i.Z.json({error:C},{status:500})}}async function U(j){let{userIp:M}=await j.json(),C=`credits_${M}`;try{let b=new R({Bucket:a.dQ,Key:C}),S=await a.ul.send(b),A=S.Body?parseInt(await S.Body.transformToString()):5;if(!(A>0))return i.Z.json({message:"No credits left"},{status:403});{A--;let F=new E.U({Bucket:a.dQ,Key:C,Body:A.toString()});return await a.ul.send(F),i.Z.json({message:"Credit used successfully",credits:A})}}catch(b){return console.error("Error updating credits:",b),i.Z.json({message:"Error updating credits"},{status:500})}}let B=new d.AppRouteRouteModule({definition:{kind:p.x.APP_ROUTE,page:"/api/credits/route",pathname:"/api/credits",filename:"route",bundlePath:"app/api/credits/route"},resolvedPagePath:"/Users/kristen/Documents/code/personal/ai-generative-fill/app/api/credits/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:G,staticGenerationAsyncStorage:L,serverHooks:K,headerHooks:H,staticGenerationBailout:q}=B,D="/api/credits/route";function Z(){return(0,k.XH)({serverHooks:K,staticGenerationAsyncStorage:L})}let Q=r,X=c.a.wrap(B)},4223:Z_,5131:D_,8102:q_,8555:H_,1118:G_,6186:U_,2378:K_,1168:L_,893:$_,4497:F_,9517:B_,5449:j_,4395:T_,2411:M_,7061:I_,4967:A_,3297:S_,1900:C_,4182:O_,4244:R_,6526:N_,7271:P_,2600:w_,9438:v_,8672:b_,8989:E_,5863:y_,8732:x_,8881:m_,7114:l_,387:f_,4794:g_,212:p_,6563:d_,1494:i_,678:Hn,5503:gn,6225:Gn,261:Un,9726:Kn,4464:Ln,6840:$n,9532:Fn,5466:pn,8050:dn,2834:kn,3444:hn,7484:an,9504:sn,7212:rn,7988:un,2144:on,7785:cn,1316:Bn,2035:tn,1725:en,4851:nn,6329:jn,5936:_n,1430:Tn,7795:Mn,6558:V_,6438:J_,4275:W_,8055:In,2016:Dn,1622:An,9135:Sn,7756:Cn,3578:On,2200:Rn,7899:Nn,4606:Pn,9386:wn,7502:vn,966:bn,2036:En,1797:yn,2745:xn,8278:mn,3689:k_,3221:h_,2368:a_,4116:s_,7776:r_,6937:u_,4450:o_,8598:c_,7135:t_,9945:e_,4896:n_,8216:z_,7584:Y_,7809:X_,6774:Q_,7226:__},v=>{var N=v(v.s=116);(I._ENTRIES=typeof I._ENTRIES>"u"?{}:I._ENTRIES)["middleware_app/api/credits/route"]=N}]),function(){let v={exports:{},loaded:!1};return function(n,t){var r=Object.defineProperty,c=_=>r(_,"__esModule",{value:!0}),d=(_,f)=>{c(_);for(var o in f)r(_,o,{get:f[o],enumerable:!0})};d(t,{default:()=>i});function p(_){let f={};return _&&_.forEach((o,u)=>{f[u]=o,u.toLowerCase()==="set-cookie"&&(f[u]=k(o))}),f}function k(_){let f=[],o=0,u,y,m,w,R;function E(){for(;o<_.length&&/\s/.test(_.charAt(o));)o+=1;return o<_.length}function P(){return y=_.charAt(o),y!=="="&&y!==";"&&y!==","}for(;o<_.length;){for(u=o,R=!1;E();)if(y=_.charAt(o),y===","){for(m=o,o+=1,E(),w=o;o<_.length&&P();)o+=1;o<_.length&&_.charAt(o)==="="?(R=!0,o=w,f.push(_.substring(u,m)),u=o):o=m+1}else o+=1;(!R||o>=_.length)&&f.push(_.substring(u,_.length))}return f}function i(_){let f=_.staticRoutes.map(u=>({regexp:new RegExp(u.namedRegex),page:u.page})),o=_.dynamicRoutes?.map(u=>({regexp:new RegExp(u.namedRegex),page:u.page}))||[];return async function(u,y){let m=new URL(u.url).pathname,w={};if(_.nextConfig?.basePath&&m.startsWith(_.nextConfig.basePath)&&(m=m.replace(_.nextConfig.basePath,"")||"/"),_.nextConfig?.i18n)for(let E of _.nextConfig.i18n.locales){let P=new RegExp(`^/${E}($|/)`,"i");if(m.match(P)){m=m.replace(P,"/")||"/";break}}for(let E of f)if(E.regexp.exec(m)){w.name=E.page;break}if(!w.name){let E=x(m);for(let P of o||[]){if(E&&!x(P.page))continue;let T=P.regexp.exec(m);if(T){w={name:P.page,params:T.groups};break}}}let R=await I._ENTRIES[`middleware_${_.name}`].default.call({},{request:{url:u.url,method:u.method,headers:p(u.headers),ip:a(u.headers,g.Ip),geo:{city:a(u.headers,g.City,!0),country:a(u.headers,g.Country,!0),latitude:a(u.headers,g.Latitude),longitude:a(u.headers,g.Longitude),region:a(u.headers,g.Region,!0)},nextConfig:_.nextConfig,page:w,body:u.body}});return y.waitUntil(R.waitUntil),R.response}}function a(_,f,o=!1){let u=_.get(f)||void 0;return o&&u?decodeURIComponent(u):u}function x(_){return _==="/api"||_.startsWith("/api/")}var g;(function(_){_.City="x-vercel-ip-city",_.Country="x-vercel-ip-country",_.Ip="x-real-ip",_.Latitude="x-vercel-ip-latitude",_.Longitude="x-vercel-ip-longitude",_.Region="x-vercel-ip-country-region"})(g||(g={}))}(v,v.exports),v.exports}.call({}).default({name:"app/api/credits/route",staticRoutes:[{page:"/_not-found",regex:"^/_not\\-found(?:/)?$",routeKeys:{},namedRegex:"^/_not\\-found(?:/)?$"}],dynamicRoutes:[{page:"/[lang]",regex:"^/([^/]+?)(?:/)?$",routeKeys:{nxtPlang:"nxtPlang"},namedRegex:"^/(?<nxtPlang>[^/]+?)(?:/)?$"},{page:"/[lang]/newPage",regex:"^/([^/]+?)/newPage(?:/)?$",routeKeys:{nxtPlang:"nxtPlang"},namedRegex:"^/(?<nxtPlang>[^/]+?)/newPage(?:/)?$"},{page:"/[lang]/playground",regex:"^/([^/]+?)/playground(?:/)?$",routeKeys:{nxtPlang:"nxtPlang"},namedRegex:"^/(?<nxtPlang>[^/]+?)/playground(?:/)?$"},{page:"/[lang]/privacy",regex:"^/([^/]+?)/privacy(?:/)?$",routeKeys:{nxtPlang:"nxtPlang"},namedRegex:"^/(?<nxtPlang>[^/]+?)/privacy(?:/)?$"},{page:"/[lang]/tos",regex:"^/([^/]+?)/tos(?:/)?$",routeKeys:{nxtPlang:"nxtPlang"},namedRegex:"^/(?<nxtPlang>[^/]+?)/tos(?:/)?$"}],nextConfig:{basePath:""}})))(l,l,l);export{ne as default};
